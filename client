#!/usr/bin/python3

import socket		 	                      
import sys

s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)


try: 	  		              
    from_user   = sys.argv[1]
    split       = from_user.split(':')
    host        = str(split[0])                           
    port        = int(split[1])


    s.connect((host, port))                           
                           
    print("Connected to :",from_user)
    initial_msg = s.recv(1024).decode()
    print("\n", initial_msg)
    s.send("OK".encode())


    while(True):
        Y=(s.recv(1024).decode()).split()

        if Y[0] == "add":
            print ("Calculating .....\n")
            a = int(Y[1])+int(Y[2])
            s.send(str(a).encode())
            print("result is ",a )
            print("\nReturned the result to the server. \n")
            return_msg = s.recv(1024).decode()
            print(return_msg)
            break

        elif Y[0] == "sub":
            print ("Calculating .....\n")
            b = int(Y[1])-int(Y[2])
            s.send(str(b).encode())
            print("result is ", b)
            print("\nReturned the result to the server.\n")
            return_msg = s.recv(1024).decode()
            print(return_msg)
            break

        elif Y[0] == "mul":
            print ("Calculating .....\n")
            d = int(Y[1])*int(Y[2])
            s.send(str(d).encode())
            print("result is ", d)
            print("\nReturned the result to the server.\n")
            return_msg = s.recv(1024).decode()
            print(return_msg)
            break

        elif Y[0] == "div":
            print ("Calculating .....\n")
            e = int(Y[1])/int(Y[2])
            s.send(str(e).encode())   
            print("result is ",int(e))
            print("\nReturned the result to the server.\n")
            return_msg = s.recv(1024).decode()
            print(return_msg)
            break

        elif Y[0] == "fadd":
            print ("Calculating .....\n")
            fa = float(Y[1])+float(Y[2])
            s.send(str(fa).encode())
            print('result is %8.8g' %fa)
            print("\nReturned the result to the server.\n")
            return_msg = s.recv(1024).decode()
            print(return_msg)
            break

        elif Y[0] == "fsub":
            print ("Calculating .....\n")
            fb = float(Y[1])-float(Y[2])
            s.send(str(fb).encode())
            print('result is %8.8g'%fb)
            print("\nReturned the result to the server.\n")
            return_msg = s.recv(1024).decode()
            print(return_msg)
            break

        elif Y[0] == "fmul":
            print ("Calculating .....\n")
            fd = float(Y[1])*float(Y[2])
            s.send(str(fd).encode())
            print('result is %8.8g' %fd)
            print("\nReturned the result to the server.\n")
            return_msg = s.recv(1024).decode()
            print(return_msg)
            break

        elif Y[0] == "fdiv":
            print ("Calculating .....\n")
            fe = float(Y[1])/float(Y[2])
            s.send(str(fe).encode())
            print('result is %8.8g' %fe)
            print("\nReturned the result to the server.\n")
            return_msg = s.recv(1024).decode()
            print(return_msg)
            break

        elif result == "ZeroDiv":
            print("You can't divide by 0, try again")
        elif result == "MathError":
            print("There is an error with your math, try again")
        elif result == "SyntaxError":
            print("There is a syntax error, please try again")
        elif result == "NameError":
            print("You did not enter an equation, try again")        
            

        else:
            print("Wrong input bye bye")

        print("Returned the result to the server.")

    s.close

except(IndexError, ValueError):
    pass 				

